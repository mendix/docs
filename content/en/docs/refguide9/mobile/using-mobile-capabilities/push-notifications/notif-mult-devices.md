---
title: "Part 8: Send Notifications to Multiple Devices"
linktitle: "8. Notifications to Multiple Devices"
url: /refguide9/mobile/using-mobile-capabilities/push-notifications/notif-mult-devices/
weight: 90
description: Learn to send notifications to multiple devices with the Native Mobile Builder.
aliases:
    - /howto9/mobile/notif-mult-devices/
---

## Introduction

This how-to teaches you how to send test push notifications to multiple devices.

{{% alert color="info" %}}
Push notifications only work with apps created through the Mendix Native Mobile Builder. You cannot send notifications to an app inside the Make it Native app.
{{% /alert %}}

## Prerequisites

Before starting this section, make sure you have completed the following prerequisite:

* Send one test push notification as described in [Push Notifications](/refguide9/mobile/using-mobile-capabilities/push-notifications/)

If you want to use push notifications with custom apps created with Mendix Native Mobile Builder, make sure you have completed the following prerequisite:

* Complete [Build a Mendix Native App Locally](/refguide9/mobile/distributing-mobile-apps/building-native-apps/native-build-locally/)

## Sending Notifications to Multiple Devices

What if you want to send messages to all your users' devices with a single button push, but you do not want to handle the GUID retrieval? The section below will address this scenario. Specifically, you will send a push notification containing a data object to your users' devices via the Push Notifications API.

### Creating a Microflow to Send a Data Object Push Notification 

Create a microflow *ACT_SendProductToAllDevices* with the following elements:

{{< figure src="/attachments/howto9/mobile/native-mobile/implementation/notifications/notif-mult-devices/SendProductToAll.png" alt="SendProductToAll"    width="400"  class="no-border" >}}

1. Add a *Product* data parameter to your microflow.
2. Retrieve the *PushNotifications.Device* entity list from a database:

    {{< figure src="/attachments/howto9/mobile/native-mobile/implementation/notifications/notif-mult-devices/retrieveDevices.png" alt="retrieveDevices"    width="400"  class="no-border" >}}

3. Drag the **PrepareMessageData** microflow from *PushNotifications/_USE ME/API* onto **ACT_SendProductToAllDevices** and configure the following:<br />
    1. Title: *myTitle*.<br />
    1. Body: *myBody*.<br />
    1. TimeToLive: *0*.<br />
    1. Badge: *0*.<br />
    1. ActionName: *sendProduct*.<br />
    1. ContextObjectGuid: *empty*:

    {{< figure src="/attachments/howto9/mobile/native-mobile/implementation/notifications/notif-mult-devices/prepareMessageData.png" alt="prepareMessageData"    width="400"  class="no-border" >}}

    **ContextObjectGuid** is set to empty since you will pass the object itself to the **SendMessageToDevices** Java action where it will be retrieved automatically. 

4. Drag the **SendMessageToDevices** Java action from *PushNotifications/_USE ME/API* onto **ACT_SendProductToAllDevices** and configure the following:<br />
    1. **Message data param**: **$MessageToBeSent**.<br />
    1. **Device param**: **$Devices**.<br />
    1. **Context object**: **$Product**:

    {{< figure src="/attachments/howto9/mobile/native-mobile/implementation/notifications/notif-mult-devices/sendMessagesJava.png" alt="sendMessagesJava"    width="400"  class="no-border" >}}

5. Go to **Product_NewEdit** and drag **ACT_SendProductToAllDevices** inside of that page's data view:

    {{< figure src="/attachments/howto9/mobile/native-mobile/implementation/notifications/notif-mult-devices/sendProductToAllButton.png" alt="sendProductToAllButton"    width="400"  class="no-border" >}}

### Testing the Implementation

Test your new push notification capabilities by doing the following:

1. Run your native app in your device's background.
2. In your web browser, go to **Product_NewEdit** and click your **ACT_SendProductToAllDevices** microflow button. 

This will send a notification to all available devices. When you tap the notification, you will be redirected to the particular product page you modeled.

## More Java Action Explanations

For more detail on Java actions available in the Push notifications module, see the sections below.

### PrepareMessageData Microflow

This allows users to create their own user interfaces in order to alter and create a push notification message. 

### SendMessageToDevice and SendMessageToDevices Java Actions

These Java actions have the following parameters:

* **MessageDataParam** (PushNotifications.MessageData): this parameter can be generated by the **PrepareMessageData** microflow
* **DeviceParam** (List of PushNotifications.Device or PushNotification.Device): this parameter can be used to send the same message to a list of devices
* **ContextObject**: this parameter will allow any Mendix object to be passed to the notification

### SendMessageToUsers and SendMessageToUser Java Actions

Every user is allowed to have more than one device. When sending push notifications to every device of a particular user, use the **SendMessageToUser** Java action.

To send a push notification to all users, use the **SendMessageToUsers** Java action.

## Troubleshooting Notification Issues

If you run into issues, see the [Troubleshoot Notification Issues](/refguide9/mobile/using-mobile-capabilities/push-notifications/notif-send-test/#troubleshoot) section of *Send Your First Test Push Notification*.
